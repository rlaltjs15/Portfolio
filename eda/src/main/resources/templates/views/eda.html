<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layouts/main_layout}">

<head>
	<title>일회용품 사용하지 않기</title>
</head>

<body>
	<!-- 메인 콘텐츠 -->
	<div layout:fragment="content">
		<h1 class="text-center">일회용품 사용하지 않기 캠페인</h1>
		<p class="text-center">일회용품을 사용하지 않으면 결제 후 10 포인트를 받게 됩니다!</p>

		<!-- 사용자 이름 입력 -->
		<div class="row justify-content-center">
			<div class="col-md-6">
				<form id="pointForm">
					<div class="mb-3">
						<label for="username" class="form-label">사용자 이름:</label>
						<input type="text" class="form-control" id="username" placeholder="사용자 이름을 입력하세요" required>
					</div>
					<button type="submit" class="btn btn-primary w-100">일회용품 사용하지 않기</button>
				</form>
			</div>
		</div>

		<!-- 성공 메시지 표시 -->
		<div id="successMessage" class="alert alert-success mt-3 text-center d-none">
			결제가 완료되었습니다! 10 포인트가 추가되었습니다.
		</div>
	</div>

	<!-- JavaScript -->
	<script>
		document.getElementById('pointForm').addEventListener('submit', function (event) {
			event.preventDefault(); // 기본 제출 동작 방지

			// 사용자 이름을 가져오기
			const username = document.getElementById('username').value;

			// 서버로 POST 요청 보내기
			fetch('/api/addPoints?username=' + username, {
				method: 'POST'
			}).then(response => response.text())
				.then(data => {
					document.getElementById('successMessage').classList.remove('d-none'); // 성공 메시지 표시
					console.log(data);
				})
				.catch(error => console.error('Error:', error));
		});
	</script>
</body>

</html>